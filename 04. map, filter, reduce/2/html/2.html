<script src="../lib/fx.js"></script>

<script>
  const products = [
    {name: '반팔티', price: 15000},
    {name: '긴팔티', price: 20000},
    {name: '핸드폰케이스', price: 15000},
    {name: '후드티', price: 30000},
    {name: '바지', price: 25000}
  ];

  const add = (a, b) => a + b;

  log(
    reduce(
      add,
      map(p => p.price,
        filter(p => p.price < 20000, products))));
// 이렇게 함수들이 중첩이 되었으면 오른쪽부터 읽으면 편하다.
  log(
    reduce(
      add,
      filter(n => n >= 20000,
        map(p => p.price, products))));
</script>

함수형 프로그래밍에서는 이렇게 함수들을 중첩하고 연속적으로 실행하면서 코딩을 하게 된다.

함수형 프로그래밍처럼 사고를 하거나 읽을려면 이런식으로 하면 된다. 예를 들어 reduce를 하고 싶은데 add를 하는 것이다. 

다시 말하면 products를 통해서 reduce를 할 건데 add 부분까지는 그냥 작성할 수 있다. 그 다음은 add 인자 다음에 어떤 값이 올 것인지를 생각하는 것이다. [ 1,2,3 ] 이런 배열이 올 거라고 생각을 하는 것이다.  코드가 평가 되었을 때 숫자가 있는 배열로 평가 될 것을 기대하는 것이다.
  reduce(add, [1,2,3])   [1,2,3] 이 자리에 숫자가 들어있는 배열로 코드가 평가 되게 해야겠구나라고 생각하면 된다. 

  reduce(
    add,
    map(p => p.price, products)) 이런식으로 말이다. 

    그 다음에 products 이 자리에 products들을 특정 조건에 맞게 남겨져 있는 배열로 평가 되도록 코드를 작성하면 되겠다라고 생각하는 것이다. 
  reduce(
    add,
    map(p => p.price,
      filter(p => p.price < 20000, 
      {name: '반팔티', price: 15000},
      {name: '핸드폰케이스', price: 15000})))
      이렇게 생각하는 것이다. 

  reduce(
    add,
    map(p => p.price,
      filter(p => p.price < 20000, products))) 결국에는 이렇게 되는 것이다.